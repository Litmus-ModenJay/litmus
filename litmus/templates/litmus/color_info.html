{% extends "base.html" %}

{% block head %}
<style>
    #map {height: 500px; width:800px}
    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        }
</style>
{% endblock %}

{% block content %}
<br>
<div class="container-fluid text-center">
    <!-- Message for New Color Registration --> 
    {% if message %}
    <div id="collapseMessage" class="collapse show" aria-labelledby="headingMessage" > 
        <div class="alert alert-success" role="alert">
            <p style="font-weight:bold">"{{message}}"</p>
            <button type="button" class="btn btn-secondary collapsed" data-toggle="collapse" data-target="#collapseMessage">Close</button>
        </div>
        <br>  
    </div>
    {% endif %}
    
    <div class="row content">
        <!-- Title -->
        <div class="col-sm-8 text-left"> 
            <h3>Color Information</h3>
        </div>   
        <!-- Setting of Link Button -->
        <div class="col-sm-2" style="text-align:right">
            <p></p>
            <p></p>
        </div>
        <div class="col-sm-2" style="text-align:right">
            <p><a class="btn btn-info btn-sm border-light" style="background-color:royalblue; width:110pt"
                href="{% url 'litmus:main' %}">Color Search</a></p>
            <p></p>
        </div>
    </div>
</div>
<br>
<div class="container">
    <div class="row content">
        <div class="col-sm-3 "> 
            <div class="card" style="width: 160px; height: 160px;">
                <div class="card-body" style="background-color:{{litmus.hexa}}">           
                    {% if litmus.depth == "Dark" or litmus.depth == "Deep"%}
                    <h5 class="card-title" style="color:white">{{litmus.name}}</h5>
                    <h6 style="color:white">{{litmus.hexa}}</h6>  
                    {% else %}
                    <h5 class="card-title" style="color:black; font-weight: bold">{{litmus.name}}</h5>
                    <h6 style="color:black">{{litmus.hexa}}</h6> 
                    {% endif %}                  
                </div> 
            </div>
            <br>
            <table class="table-condensed" style="font-size:small; padding:10px">
                <tr><td>&ensp;</td><td>Group&ensp;</td><td>{{litmus.group}}</td></tr>
                <tr><td>&ensp;</td><td>Cell</td><td>{{litmus.cell}}</td></tr>
                <tr><td>&ensp;</td><td>Class</td><td>{{litmus.star}}</td></tr>
                <tr><td>&ensp;</td><td>Family</td><td>{{litmus.family}}</td></tr>
            </table>
            <br>
        </div>
        <div class="col-sm-9 text-left"> 
            <h5>Color Coordinates</h5>
            <hr>
            <table class="table-condensed" style="font-size:small; ">
                <tr><td>RGB</td>
                    <td>R {{vector.RGB.RGB.R}}&ensp; G {{vector.RGB.RGB.G}}&ensp; B {{vector.RGB.RGB.B}}</td></tr>
                <tr><td>rgb</td>
                    <td>r {{vector.RGB.rgb.r|floatformat:4}}&ensp; g {{vector.RGB.rgb.g|floatformat:4}}&ensp; b {{vector.RGB.rgb.b|floatformat:4}}</td></tr> 
                <tr><td>rgb Parameters &ensp; </td>    
                    <td>Sum {{vector.RGB.Param.Sum|floatformat:4}}&ensp; Max {{vector.RGB.Param.Max|floatformat:4}}&ensp; Min {{vector.RGB.Param.Min|floatformat:4}}&ensp; Sigma {{vector.RGB.Param.Sigma|floatformat:4}}&ensp; Delta {{vector.RGB.Param.Delta|floatformat:4}}</td></tr> 
                <tr><td>HSL </td> 
                    <td>H {{vector.HSLV.HSL.H|floatformat:2}}&ensp; S {{vector.HSLV.HSL.S|floatformat:4}}&ensp; L {{vector.HSLV.HSL.L|floatformat:4}}&ensp; C {{vector.HSLV.HSL.C|floatformat:4}}</td></tr>
                <tr><td>HSV</td>
                    <td>H {{vector.HSLV.HSV.H|floatformat:2}}&ensp; S {{vector.HSLV.HSV.S|floatformat:4}}&ensp; V {{vector.HSLV.HSV.V|floatformat:4}}&ensp; C {{vector.HSLV.HSV.C|floatformat:4}}</td></tr>
                <tr><td>CMYK &ensp; </td>
                    <td>K {{vector.CMYK.K|floatformat:4}}&ensp; C {{vector.CMYK.C|floatformat:4}}&ensp; M {{vector.CMYK.M|floatformat:4}}&ensp; Y {{vector.CMYK.Y|floatformat:4}}</td></tr>
                <tr><td>XYZ &ensp; </td>
                    <td>X {{vector.XYZ.sRGB.X|floatformat:4}}&ensp; Y {{vector.XYZ.sRGB.Y|floatformat:4}}&ensp; Z {{vector.XYZ.sRGB.Z|floatformat:4}}&ensp; 
                        x {{vector.XYZ.sRGB.x|floatformat:4}}&ensp; y {{vector.XYZ.sRGB.y|floatformat:4}}&ensp; I {{vector.XYZ.sRGB.I|floatformat:4}}</td></tr>
                <tr><td>Lab &ensp; </td>
                    <td>L {{vector.Labuv.sRGB_D65_2.Lab.L|floatformat:4}}&ensp; a* {{vector.Labuv.sRGB_D65_2.Lab.a|floatformat:4}}&ensp; b* {{vector.Labuv.sRGB_D65_2.Lab.b|floatformat:4}}&ensp; 
                        H {{vector.Labuv.sRGB_D65_2.Lab.H|floatformat:2}}&ensp; C {{vector.Labuv.sRGB_D65_2.Lab.C|floatformat:4}}&ensp; S {{vector.Labuv.sRGB_D65_2.Lab.S|floatformat:4}}</td></tr>
                <tr><td>Luv &ensp;</td>
                    <td>L {{vector.Labuv.sRGB_D65_2.Luv.L|floatformat:4}}&ensp; u* {{vector.Labuv.sRGB_D65_2.Luv.u|floatformat:4}}&ensp; v* {{vector.Labuv.sRGB_D65_2.Luv.v|floatformat:4}}&ensp; 
                        H {{vector.Labuv.sRGB_D65_2.Luv.H|floatformat:2}}&ensp; C {{vector.Labuv.sRGB_D65_2.Luv.C|floatformat:4}}&ensp; S {{vector.Labuv.sRGB_D65_2.Luv.S|floatformat:4}}</td></tr>
                <tr><td>GeoLab</td>
                    <td>Latitude {{vector.Labuv.sRGB_D65_2.GeoLab.Lati|floatformat:2}}&ensp; Longitude {{vector.Labuv.sRGB_D65_2.GeoLab.Long|floatformat:2}}&ensp; Radius {{vector.Labuv.sRGB_D65_2.GeoLab.Radius|floatformat:4}}</td></tr> 
            </table>
            <br>
        </div>
    </div>
</div>
<div class="container">
    {% if search.identical.count > 2 %}
        <br>
        <h5>Identical Colors <span class="badge badge-warning" style="font-size:12pt; text-align:center">{{search.identical.count}}</span></h5>
        <hr>
        {% for item in search.identical.list %}
        {% if item.case == 'identical' %}
        <div style="display: inline-block;">
            {% if item.litmus.depth == "Dark" or item.litmus.depth == "Deep" %}
                <p><a class="btn btn-primary btn-block border-light"
                    style="width: 100px; height: 100px; font-size:8pt; text-align:left; padding:5px; color:white; background-color:{{item.litmus.hexa}};"
                    href="{% url 'litmus:colorInfo' pk=item.id %}">
                    {{ item.litmus.name|slice:':17' }}
                </a></p>
            {% else %}
                <p><a class="btn btn-default btn-block border-light font-weight-bold"
                    style="width: 100px; height: 100px; font-size:8pt; text-align:left; padding:5px; color:black; background-color:{{item.litmus.hexa}}"
                    href="{% url 'litmus:colorInfo' pk=item.id %}">
                    {{ item.litmus.name|slice:':17' }}
                </a></p>
            {% endif %}
        </div>
        {% endif %}
        {% endfor %}
        <br><br>
    {% endif %}
    {% if search.neighbor.count %}
        <br>
        <h5>Neighbor Colors" <span class="badge badge-warning" style="font-size:12pt; text-align:center">{{search.neighbor.count}}</span></h5>
        <hr>
        {% for item in search.neighbor.list %}
        <div style="display: inline-block;">
            {% if item.litmus.depth == "Dark"  or item.litmus.depth == "Deep" %}
                <p><a class="btn btn-primary btn-block border-light"
                    style="width: 100px; height: 100px; font-size:8pt; text-align:left; padding:5px; color:white; background-color:{{item.litmus.hexa}};"
                    href="{% url 'litmus:colorInfo' pk=item.id %}">
                    {{ item.litmus.name|slice:':15' }}<br>d={{item.distance|floatformat:4}}
                </a></p>
            {% else %}
                <p><a class="btn btn-default btn-block border-light font-weight-bold"
                    style="width: 100px; height: 100px; font-size:8pt; text-align:left; padding:5px; color:black; background-color:{{item.litmus.hexa}}"
                    href="{% url 'litmus:colorInfo' pk=item.id %}">
                    {{ item.litmus.name|slice:':15' }}<br>d={{item.distance|floatformat:4}}
                </a></p>
            {% endif %}
        </div>
        {% endfor %}
        <br><br>
    {% endif %}
    {% if search.family.count %}
        <br>
        <h5>Family colors<span class="badge badge-warning" style="font-size:12pt; text-align:center">{{search.family.count}}</span></h5>
        <hr>
        {% for item in search.family.list %}
        <div style="display: inline-block;">
            {% if item.litmus.depth == "Dark" or litmus.depth == "Deep" %}
                <p><a class="btn btn-primary btn-block border-light"
                    style="width: 100px; height: 100px; font-size:8pt; text-align:left; padding:5px; color:white; background-color:{{item.litmus.hexa}};"
                    href="{% url 'litmus:colorInfo' pk=item.id %}">
                    {{ item.litmus.name|slice:':15' }}
                </a></p>
            {% else %}
                <p><a class="btn btn-default btn-block border-light font-weight-bold"
                    style="width: 100px; height: 100px; font-size:8pt; text-align:left; padding:5px; color:black; background-color:{{item.litmus.hexa}}"
                    href="{% url 'litmus:colorInfo' pk=item.id %}">
                    {{ item.litmus.name|slice:':15' }}
                </a></p>
            {% endif %}
        </div>
        {% endfor %}
        <br><br>
    {% endif %}
        <br>
        <h5>Proximity</h5>
        <hr>
        {% for item in litmus.proximity %}
        <div style="display: inline-block;">
            {% if item.name == "Black" or item.name == "Purple" or item.name == "Brown" or item.name == "Blue" %}
                <p><a class="btn btn-primary btn-block border-light"
                    style="width: 70px; height: 60px; font-size:8pt; text-align:left; padding:5px; color:white; background-color:{{item.hexa}};">
                    {{ item.name }}<br>
                    {{ item.distance|floatformat:4 }}
                </a></p>
            {% else %}
                <p><a class="btn btn-default btn-block border-light font-weight-bold"
                    style="width: 70px; height: 60px; font-size:8pt; text-align:left; padding:5px; color:black; background-color:{{item.hexa}}">
                    {{ item.name }}<br>
                    {{ item.distance|floatformat:4 }}
                </a></p>
            {% endif %}
        </div>
        {% endfor %}
        <br><br>

    <h5>Geo Map</h5>
    <hr>
    <div id="map"></div>
</div>  
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCr7uqzPRQYrFASLrIVkMbK8yCk6vbavtQ&callback=initMap"
></script>

{% endblock %}

{% block scripts %}

<script>
    var map;
    function initMap() {
        var map_center = {lat: 40, lng: 150}; 
        var map = new google.maps.Map(document.getElementById('map'), {zoom: 1.4, center: map_center});
        // var marker = new google.maps.Marker({position: map_center, map: map, title:"title"});
        var locations = [
            {% for key, value in search.items %}
            {% for item in value.list %}
            ["{{item.id}}", {{item.litmus.geo.0}}, {{item.litmus.geo.1}}, "{{item.litmus.name}}", "{{item.litmus.hexa}}", "{{item.case}}"],
            {% endfor %}
            {% endfor %}
        ];
        for (var i = 0; i < locations.length; i++) {
            if (locations[i][5] == 'supernova') {
                var marker = new google.maps.Marker({ 
                    position: {lat: locations[i][1], lng: locations[i][2]}, 
                    map: map,
                    label: {
                        color: 'black',
                        fontWeight: 'bold',
                        fontSize: '11px',
                        text: locations[i][3]
                    },
                    icon: {
                        path: google.maps.SymbolPath.BACKWARD_CLOSED_ARROW,
                        scale : 3,
                        strokeWeight : 1,
                        fillColor: locations[i][4],
                        fillOpacity: 1.0,
                        strokeColor: 'black',
                        // anchor: new google.maps.Point(0, 0),
                        labelOrigin: new google.maps.Point(0, 2)
                    },
                });
            } else if (locations[i][5] == 'self') {
                var marker = new google.maps.Marker({ 
                    position: {lat: locations[i][1], lng: locations[i][2]}, 
                    map: map,
                    label: {
                        color: 'black',
                        fontWeight: 'bold',
                        fontSize: '11px',
                        text: locations[i][3]
                    },
                    icon: {
                        path: google.maps.SymbolPath.CIRCLE,
                        scale : 8,
                        strokeWeight : 6,
                        fillColor: locations[i][4],
                        fillOpacity: 1.0,
                        strokeColor: 'red',
                        // anchor: new google.maps.Point(0, 0),
                        labelOrigin: new google.maps.Point(0, 2)
                    },
                });
            } else {
                var marker = new google.maps.Marker({ 
                    position: {lat: locations[i][1], lng: locations[i][2]}, 
                    map: map,
                    label: {
                        color: 'black',
                        fontWeight: 'bold',
                        fontSize: '11px',
                        text: locations[i][3]
                    },
                    icon: {
                        path: google.maps.SymbolPath.CIRCLE,
                        scale : 5,
                        strokeWeight : 1,
                        fillColor: locations[i][4],
                        fillOpacity: 1.0,
                        strokeColor: 'black',
                        // anchor: new google.maps.Point(0, 0),
                        labelOrigin: new google.maps.Point(0, 2)
                    },
                });
            }
        }
    }
</script>

{% endblock %}
