{% extends "base.html" %}

{% block content %}

<br>
<div class="container-fluid text-center">
    <div class="row content">
        <!-- Title -->
        <div class="col-sm-8 text-left"> 
            <h3>Color Search</h3>
            <p></p>
            <br>
        </div>
        <!-- Setting of Link Button -->
        <div class="col-sm-2" style="text-align:right">
            <p></p>        
        </div>
        <div class="col-sm-2" style="text-align:right">
            <p><a class="btn btn-info btn-sm" style="background-color:royalblue; width:110pt" 
                href="{% url 'litmus:colorLibrary' %}">Color Library</a></p>
            <p></p>
            <p></p>
        </div>
    </div>
    <div class="row content">
        <!-- Search -->
        <br>
        <form class="form-inline" action="{% url 'litmus:colorSearch' %}" id="color_search" method="POST">
            {% csrf_token %}
            <div class="form-group" >
                <button class="input-group-addon btn btn-Warning" id="color_picker"><i class="fas fa-palette color:green"></i></button>
                <input type="text"  name="search" id="search_input" class="form-control input-group colorpicker-component" style="text-align:left" placeholder="color name or code">
                <button type="submit" onkeydown="enterkey();" name="submit" class="btn btn-Warning"><i class="fas fa-search"></i></button>   
            </div>
        </form>
        <br><br>
    </div>
</div>
<div class="container-fluid text-center" style="text-align:center; padding:10px">
    <p></p>
</div>


<div class="container">
    {% if search.identicals.count %}
        <hr>
        <h6>Colors Identical to "{{word}}" <span class="badge badge-warning" style="font-size:12pt; text-align:center">{{search.identicals.count}}</span></h6>
        <br>
        {% for item in search.identicals.list %}
        <div style="display: inline-block;">
            <div class="card" style="width: 5rem; height: 6rem;" href="{% url 'litmus:colorInfo' pk=item.id %}">
                <div class="card-header" style="font-size:8pt; font-weight:bold; padding:2px;">{{item.name.capitalize|slice:':13'}}</div>
                <div class="card-body" style="background-color:{{item.hexa}}; "></div>
                <div class="card-footer" style="background-color:white; font-size:8pt; font-weight:normal; padding:2px">d={{item.distance|floatformat:4}}</div>
            </div>
        </div> 
        {% endfor %}
    {% endif %}
<br><br>

    {% if search.neighbors.count %}
        <hr>
        <h6>Colors Neighbor to "{{word}}" <span class="badge badge-warning" style="font-size:12pt; text-align:center">{{search.neighbors.count}}</span></h6>
        <br>
        {% for item in search.neighbors.list %}
        <div style="display: inline-block;">
            <div class="card" style="width: 5rem; height: 6rem;" href="{% url 'litmus:colorInfo' pk=item.id %}">
                <div class="card-header" style="font-size:8pt; font-weight:bold; padding:2px;">
                    {{item.name.capitalize|slice:':13'}}</div>
                <div class="card-body" style="background-color:{{item.hexa}}; "></div>
                <div class="card-footer" style="background-color:white; font-size:8pt; font-weight:normal; text-align:center; padding:2px">
                    d={{item.distance|floatformat:4}}</div>
            </div>
        </div> 
        {% endfor %}
    {% endif %}
    <br><br>
    
    {% if search.matches.count %}
    <div class="row content">
        <div class="col-sm-4 text-left"> 
            <h6>Colors including word "{{word}}"  <span class="badge badge-warning" style="font-size:12pt; text-align:center">{{search.matches.count}}</span></h6>
        </div>
        <div class="col-sm-6 text-left"> 
            <table class="table" style="font-size:small;">
                <tr>
                    <th>Color Name</th>
                    <th>Color</th>
                    <th>Hexa</th>
                </tr>        
                {% for item in search.matches.list %}
                <tr>
                    <td>{{item.name.capitalize}}</td>
                    <td><a class="btn btn-primary btn-lg border-dark" style="font-size:12pt; background-color:{{item.hexa}}"
                        href="{% url 'litmus:colorInfo' pk=item.id %}"></a></td>
                    <td>{{item.hexa}}</td>
                </tr>
                {% endfor %}
            </table>
        </div>
    </div>
    {% endif %}
    {% if word %}
    <br>
    <h5>Plot in RGB Space</h5>
    <hr>
    <div>{{plot|safe}}</div>
    <br>
    {% endif %}
</div>

{% endblock %}

{% block scripts %}
<script>
    $(function () {
        $('#color_picker').colorpicker({
            format: 'hex',
        });
        $('#color_picker').colorpicker().on('changeColor', function(e) {
            document.getElementById("search_input").value = e.color.toHex().toUpperCase();

        });
    });
</script>
{% endblock %}